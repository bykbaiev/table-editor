{"version":3,"sources":["table_editor/download_file.cljs"],"mappings":";AAKA,AAAA,AAAMA,AAAaC;AAAnB,AACE,AAAA,AAACC,AAAU,AAAA,AAAAC,AAACC;AAAD,AAAM,AAAA,AAAAD,AAACD;AAAYD;;AAEhC,AAAA,AAAMI,AAAcC,AAAKC;AAAzB,AACE,AAAMC,AAAK,AAAAC,AAAA,AAAA,AAAA,AAAA,AAAwB,AAACT,AAAYM;AAC1CI,AAAK,AAAA,AAAgBC;AAD3B,AAEE,AAACC,AAAQN,AAAKC;;AACd,AAAM,AAAQG,AAAM,AAAkBG,AAAOL;;AAC7C,AAAA,AAAeE,AAAgB,AAAA,AAAA,AAACI,AAAQP;;AACxC,AAAc,AAAQI,AAAaD;;AACnC,AAAQA;;AACR,AAAc,AAAQC,AAAaD;;AAEvC,AAAA,AAAMK;AAAN,AACE,AAAAC,AAAA,AAAAC,AAAgCK;AAAhCN,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAAA,AAAA,AAAA,AAAAE,AAAA,AAAAF,AAAA,AAAA,AAAA,AAAA,AAAAG,AAAAC,AAAAJ,AAAAA;AAAA,AAAAK,AAAAL,AAAA,AAAcV;AAAd,AAAAe,AAAAL,AAAA,AAAmBT;AACbgB,AAAU,AAAKC;AAAL,AAAQ,AAACnB,AAAaC,AAAKC;;AAD3C,AAEE,AAAMD;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAA+BiB;;AAA/B","names":["table-editor.download-file/map-content","rows","clojure.string.join","p1__43393#","cljs.core.map","table-editor.download-file/download-csv","data","file-name","blob","js/Blob","link","js/document","cljs.core.println","js/URL","clojure.string/replace","table-editor.download-file/download-button","map__43394","cljs.core/deref","cljs.core/PROTOCOL_SENTINEL","cljs.core.apply","cljs.core/hash-map","cljs.core.get","table-editor.state/state","load-file","e"],"sourcesContent":["(ns table-editor.download-file\n  (:require\n   [clojure.string :refer [join replace]]\n   [table-editor.state :refer [state]]))\n\n(defn map-content [rows]\n  (join \"\\n\" (map #(join \",\" %) rows)))\n\n(defn download-csv [data file-name]\n  (let [blob (js/Blob. #js [\"\\uFEFF\" (map-content data)] #js {:type \"text/csv;charset=utf-8\"})\n        link (.createElement js/document \"a\")]\n    (println data file-name)\n    (set! (.-href link) (.createObjectURL js/URL blob))\n    (.setAttribute link \"download\" (replace file-name #\".csv\" \"(edited).csv\"))\n    (.appendChild (.-body js/document) link)\n    (.click link)\n    (.removeChild (.-body js/document) link)))\n\n(defn download-button []\n  (let [{:keys [data file-name]} @state\n        load-file (fn [e] (download-csv data file-name))]\n    (when data [:button {:on-click load-file} \"Download file\"])))\n"]}